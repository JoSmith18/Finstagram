<html>
{% load static %} {% load app_extras%}

<head>
    <title>FakeInsta</title>
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN"
        crossorigin="anonymous">
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
        crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css?family=Bungee" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'app/bootwatch.css' %}">
    <link rel="stylesheet" href="{% static 'app/style.css' %}">
</head>

<body>
    <div class="container">
        <div class="jumbotron">
            <div class="col-lg-12 icon-header">
                <span class="head-text">Feed</span>
                <span class="fa-stack fa-md">
                    <i class="fa fa-circle fa-stack-1x jotext"></i>
                    <i class="fa fa-instagram fa-stack-2x fa-rotate-90" aria-hidden="true"></i>
                </span>
            </div>
            <h2>
                <a href="{% url 'app:upload' %}">
                    <i class="fa fa-camera" aria-hidden="true"></i>
                    Upload Picture
                </a>
                <br>
                <a href="{% url 'app:uploadvideo' %}">
                    <i class="fa fa-video-camera" aria-hidden="true"></i> Upload Video</a>
            </h2>
        </div>
        <div class="row">
            {% if videos %} {% for video in videos %}
            <div class="panel panel-default">
                <div class="panel-heading"> {{ video.uploaded_at }}
                    <h3 class="font-type">
                        <b>Posted By: {{ video.posted_by }}</b>

                        <form action="{% url 'app:deletevideo' video.id %}" method="post">
                            {% csrf_token %}
                            <button type="submit" class="btn pull-right">
                                <i class="fa fa-window-close" aria-hidden="true"></i>
                            </button>
                        </form>
                </div>
                <div class="panel-body">
                    <div class="thumbnail crop">
                        <video width="320" height="260" id="{{video.id}}" controls>
                            <source src="{% static video.image_url %}?t={% now 'u' %}" type="video/ogg" />
                            <source src="{% static video.image_url %}?t={% now 'u' %}" type="video/mp4" /> Your browser does not support the video tag.
                        </video>
                    </div>
                    <div class="like-dislike-btn">
                        <form action="{% url 'app:likevideo' video.id %}" method="post">
                            {% csrf_token %}
                            <button type="submit" class="btn">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-square fa-stack-2x text-danger"></i>
                                    <i class="fa fa-heart fa-stack-1x fa-inverse"></i>
                                </span>
                            </button>
                            {{video.likes}}
                        </form>
                        <form action="{% url 'app:dislikevideo' video.id %}" method="post">
                            {% csrf_token %}
                            <button type="submit" class="btn">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-heart fa-stack-1x text-danger"></i>
                                    <i class="fa fa-ban fa-stack-2x"></i>
                                </span>
                            </button>
                            {{video.dislikes}}
                        </form>
                    </div>
                </div>
                <div class="panel-footer">
                    <h4 class="panel-click font-type">
                        <i class="fa fa-chevron-down" aria-hidden="true"></i>&emsp;{{video.caption}}</h4>
                    <div class="panelfoot">
                        <hr>
                        <ol>
                            {% for comment in video.commentvid_set.all %}
                            <li>{{comment.comment}} - Commented At: {{comment.time}}</li> {% endfor %}
                        </ol>
                        <hr>
                        <form action="{%url 'app:commentvideo' video.id %}" method="post">
                            {% csrf_token %} {{ comment_form }}
                            <button type="submit" class="btn">Add Comment</button>
                        </form>
                        <h3>FakeInsta By Jo</h3>
                    </div>
                </div>
            </div>
            {% endfor %} {% endif %}{% if docs or videos%} {% for d in docs %}
            <div class="{{total|htmlclass}}">
                <div class="panel panel-default">
                    <div class="panel-heading"> {{ d.uploaded_at }}
                        <h3>
                            <b class="font-type">Posted By: {{ d.posted_by }}</b>
                        </h3>
                        <form action="{% url 'app:delete' d.id %} " method="post">
                            {% csrf_token %}
                            <button type="submit" class="btn pull-right">
                                <i class="fa fa-window-close" aria-hidden="true"></i>
                            </button>
                        </form>
                    </div>
                    <div class="panel-body">
                        <div class="thumbnail crop">
                            <img src="{% static d.image_url %}?t={% now 'u' %} " id="{{d.id}} " class="img-responsive" />
                        </div>
                        <div class="like-dislike-btn">
                            <form action="{% url 'app:likepic' d.id %} " method="post">
                                {% csrf_token %}
                                <button type="submit " class="btn">
                                    <span class="fa-stack fa-lg">
                                        <i class="fa fa-square fa-stack-2x text-danger"></i>
                                        <i class="fa fa-heart fa-stack-1x fa-inverse"></i>
                                    </span>
                                </button>
                                {{d.likes}}
                            </form>
                            <form action="{% url 'app:dislikepic' d.id %} " method="post">
                                {% csrf_token %}
                                <button type="submit " class="btn">
                                    <span class="fa-stack fa-lg">
                                        <i class="fa fa-heart fa-stack-1x text-danger"></i>
                                        <i class="fa fa-ban fa-stack-2x"></i>
                                    </span>
                                </button>
                                {{d.dislikes}}
                            </form>
                        </div>
                    </div>
                    <div class="panel-footer">
                        <h4 class="panel-click font-type">
                            <i class="fa fa-chevron-down" aria-hidden="true"></i>&emsp;{{d.caption}}</h4>
                        <div class="panelfoot">
                            <a href="{% url 'app:filter' d.id %} ">
                                <i class="fa fa-paint-brush" aria-hidden="true"></i> Filter
                            </a>
                            <form action="{% url 'app:rotate' d.id %} " method="post">
                                {% csrf_token %}
                                <button type="submit " class="btn">
                                    <i class="fa fa-repeat " aria-hidden="true "></i> Rotate</button>
                            </form>
                            {% if d.comment_set.all %}
                            <hr>
                            <ol>
                                {% for comment in d.comment_set.all %}
                                <li>{{comment.comment}} - Commented At: {{comment.time}}</li> {% endfor %}
                            </ol>
                            <hr>{% endif %}
                            <form action="{%url 'app:comment' d.id %} " method="post">
                                {% csrf_token %} {{ comment_form }}
                                <button type="submit" class="btn">Add Comment</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %} {% else %}
        </div>
        <div class="row">
            <div class="col-lg-12">
                <h3>No Pictures :'(</h3>
            </div>
            {% endif %}
        </div>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <script src="{% static 'app/index.js' %} "></script>
</body>

</html>